(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{114:function(e,t){},117:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(58),s=a.n(o),c=(a(67),a(2)),i=a(3),l=a(5),u=a(4),m=a(6),h=a(21),p=a(12),d=a(11),f=a.n(d),v=f.a.create({headers:{Authorization:localStorage.getItem("token")}}),g=a(22),b=Object(n.createContext)();var E={isLoggedIn:function(){return!!localStorage.getItem("token")},logIn:function(e,t,a){f.a.post("/api/authenticate",{email:e,password:t}).then((function(e){localStorage.setItem("token",e.data.token),a(e.data),console.log(e)}))},logOut:function(e){localStorage.removeItem("token"),e()},getToken:function(){return localStorage.getItem("token")},register:function(e,t,a,n,r){console.log("register"),f.a.post("/api/signup",{email:e,password:t,firstName:a,lastName:n}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},w=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",firstName:"",lastName:""},a.changeHandler=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(g.a)({},n,r))},a.submitHandler=function(e){e.preventDefault();var t=a.state,n=t.email,r=t.password,o=t.firstName,s=t.lastName;n&&r&&o&&s&&E.register(n,r,o,s,(function(e){a.context.setUser(e),a.props.history.push("/")}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.submitHandler},r.a.createElement("div",{className:"field"},r.a.createElement("h1",null,"First Name"),r.a.createElement("input",{type:"text",name:"firstName",value:this.state.first,onChange:this.changeHandler})),r.a.createElement("div",{className:"field"},r.a.createElement("h1",null,"Last Name"),r.a.createElement("input",{type:"text",name:"lastName",value:this.state.last,onChange:this.changeHandler})),r.a.createElement("div",{className:"field"},r.a.createElement("h1",null,"Password (min of 8 characters)"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.changeHandler})),r.a.createElement("div",{className:"field"},r.a.createElement("h1",null,"Email"),r.a.createElement("input",{type:"text",name:"email",value:this.state.email,onChange:this.changeHandler})),r.a.createElement("button",{className:"button is-primary is-small",type:"submit"},"Sign up"))}}]),t}(n.Component);w.contextType=b;var y=Object(p.e)(w),j=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.changeHandler=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(g.a)({},n,r))},a.submitHandler=function(e){e.preventDefault();var t=a.state,n=t.email,r=t.password;n&&r&&E.logIn(n,r,(function(e){a.context.setUser(e),a.props.history.push("/")}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.submitHandler},r.a.createElement("div",{className:"field"},r.a.createElement("h1",null,"Email"),r.a.createElement("input",{type:"text",name:"email",value:this.state.email,onChange:this.changeHandler})),r.a.createElement("div",{className:"field"},r.a.createElement("h1",null,"Password"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.changeHandler})),r.a.createElement("button",{className:"button is-primary is-small",type:"submit"},"Login")))}}]),t}(n.Component);j.contextType=b;var O=Object(p.e)(j),N=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isRegister:!1},a.changeForm=function(){a.setState({isRegister:!a.state.isRegister})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.isRegister;return r.a.createElement("div",{id:"wrap"},r.a.createElement("nav",null,r.a.createElement("h1",{id:"main-name"},"UnKnowed")),r.a.createElement("h5",{id:"quote"},"Putting community back in community"),r.a.createElement("div",{className:"container",id:"signup-container"},r.a.createElement("div",{className:"columns is-centered is-vcentered"},r.a.createElement("div",{className:"column is-narrow box"},e?r.a.createElement(y,null):r.a.createElement(O,null),r.a.createElement("a",{className:"",id:"login",onClick:this.changeForm},e?"Already have an account?":"Sign up for an account")))))}}]),t}(r.a.Component),k=a(33),S=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"posts box"},r.a.createElement("p",null,this.props.msg),r.a.createElement("img",{alt:"",className:"postPhotos",src:this.props.photos[0]}),r.a.createElement("div",{className:"username"},this.props.creator.firstName),r.a.createElement("img",{alt:"",className:"userphoto",src:this.props.creator.photo}))}}]),t}(n.Component),x=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={events:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"events box"},r.a.createElement("h2",null,this.props.title),r.a.createElement("div",{className:"postPhotos"},this.props.img),r.a.createElement("p",{className:"description"},this.props.description),r.a.createElement("span",{className:"dates"},this.props.date.start," - ",this.props.date.end),r.a.createElement("div",{className:"username"},this.props.creator.firstName),r.a.createElement("div",{className:"userphoto"},this.props.creator.photo))}}]),t}(n.Component),C=a(61),H=a.n(C),I=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={posts:[],events:[]},a.socket=H()(),a.getPosts=function(){f.a.get("/api/posts").then((function(e){return a.setState({posts:e.data})})).catch((function(e){return console.log(e)}))},a.getEvents=function(){f.a.get("/api/events").then((function(e){return a.setState({events:e.data})})).catch((function(e){return console.log(e)}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getPosts(),this.getEvents(),this.socket.on("new event",(function(t){e.setState({events:[t].concat(Object(k.a)(e.state.events))})})),this.socket.on("new post",(function(t){e.setState({posts:[t].concat(Object(k.a)(e.state.posts))})}))}},{key:"componentWillUnmount",value:function(){this.socket.close()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.posts.map((function(e){return r.a.createElement(S,{key:e._id})})),this.state.events.map((function(e){return r.a.createElement(x,{key:e._id})})))}}]),t}(r.a.Component),A=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:null},a.setUser=function(e){a.setState({user:e})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.getItem("token")&&v.get("/api/me").then((function(t){return e.setUser(t.data)}))}},{key:"render",value:function(){var e=this.state.user,t=this.setUser;return r.a.createElement(h.a,null,r.a.createElement("div",null,r.a.createElement(b.Provider,{value:{user:e,setUser:t}},r.a.createElement(p.a,{exact:!0,path:"/",component:N}),r.a.createElement(p.a,{exact:!0,path:"/mainpage",component:I}))))}}]),t}(n.Component),U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(r.a.createElement(A,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");U?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):P(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):P(e)}))}}()},62:function(e,t,a){e.exports=a(117)},67:function(e,t,a){}},[[62,1,2]]]);
//# sourceMappingURL=main.5ab7ce7a.chunk.js.map