(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{108:function(e,t,a){e.exports=a(237)},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},162:function(e,t){},235:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(26),r=a.n(s),l=a(4),c=a(5),i=a(7),m=a(6),u=a(8),p=a(35),h=a(24),d=a(107),g=a(9),v=a.n(g);var f=function(){function e(e,t,a){v.a.post("/api/authenticate",{email:e,password:t}).then((function(e){console.log(e),localStorage.setItem("token",e.data.token),a(e.data),window.location="/mainpage"}))}return{isLoggedIn:function(){return!!localStorage.getItem("token")},logIn:e,logOut:function(e){localStorage.removeItem("token"),e()},getToken:function(){return localStorage.getItem("token")},register:function(t,a){console.log("register");var n=t.get("email"),o=t.get("password");v.a.post("/api/signup",t).then((function(s){console.log("userData",t),e(n,o,a),console.log(s)})).catch((function(e){console.log(e)}))},event:function(e,t,a,n,o,s){console.log("Event Created"),v.a.post("/api/EventForm",{title:e,description:t,address:a,lat:n,lon:o}).then((function(e){console.log(e),alert("Success!"),window.location="/mainpage"})).catch((function(e){console.log(e)}))}}}(),b=function(e){var t=e.component,a=Object(d.a)(e,["component"]);return o.a.createElement(h.b,Object.assign({},a,{render:function(e){return f.isLoggedIn()?o.a.createElement(t,e):o.a.createElement(h.a,{to:"/"})}}))},E=v.a.create({headers:{Authorization:localStorage.getItem("token")}}),y=a(19),C=Object(n.createContext)(),N=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={email:"",password:"",firstName:"",lastName:"",photo:""},a.changeHandler=function(e){var t=e.target,n=t.name,o=t.value;a.setState(Object(y.a)({},n,o))},a.fileChangeHandler=function(e){var t=e.target.files[0];a.setState({photo:t})},a.submitHandler=function(e){e.preventDefault();var t=a.state,n=t.email,o=t.password,s=t.firstName,r=t.lastName,l=new FormData(document.querySelector("#newUserForm"));n&&o&&s&&r&&f.register(l,(function(e){a.context.setUser(e),a.props.history.push("/")}))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("form",{id:"newUserForm",onSubmit:this.submitHandler},o.a.createElement("div",{className:"field"},o.a.createElement("h1",null,"First Name"),o.a.createElement("input",{type:"text",name:"firstName",value:this.state.first,onChange:this.changeHandler})),o.a.createElement("div",{className:"field"},o.a.createElement("h1",null,"Last Name"),o.a.createElement("input",{type:"text",name:"lastName",value:this.state.last,onChange:this.changeHandler})),o.a.createElement("div",{className:"field"},o.a.createElement("h1",null,"Password (min of 8 characters)"),o.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.changeHandler})),o.a.createElement("div",{className:"field"},o.a.createElement("h1",null,"Email"),o.a.createElement("input",{type:"text",name:"email",value:this.state.email,onChange:this.changeHandler})),o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label",htmlFor:"photo"},"Photo"),o.a.createElement("div",{className:"control"},o.a.createElement("span",{id:"imageRemove"},"X"),o.a.createElement("input",{className:"input",name:"photo",type:"file",onChange:this.fileChangeHandler}))),o.a.createElement("button",{className:"button is-primary is-small",type:"submit"},"Sign up"))}}]),t}(n.Component);N.contextType=C;var w=Object(h.f)(N),S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={email:"",password:"",user:""},a.setUser=function(e){a.setState({user:e})},a.changeHandler=function(e){var t=e.target,n=t.name,o=t.value;a.setState(Object(y.a)({},n,o))},a.submitHandler=function(e){e.preventDefault();var t=a.state,n=t.email,o=t.password;n&&o&&f.logIn(n,o,(function(e){a.context.setUser(e),a.props.history.push("/"),console.log(a.state.user)}))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{onSubmit:this.submitHandler},o.a.createElement("div",{className:"field"},o.a.createElement("h1",null,"Email"),o.a.createElement("input",{type:"text",name:"email",value:this.state.email,onChange:this.changeHandler})),o.a.createElement("div",{className:"field"},o.a.createElement("h1",null,"Password"),o.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.changeHandler})),o.a.createElement("button",{className:"button is-primary is-small",type:"submit"},"Login")))}}]),t}(n.Component);S.contextType=C;var O=Object(h.f)(S),j=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={isRegister:!1},a.changeForm=function(){a.setState({isRegister:!a.state.isRegister})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.isRegister;return o.a.createElement("div",{id:"wrap"},o.a.createElement("nav",null,o.a.createElement("h1",{id:"main-name"},"UnKnowed")),o.a.createElement("h5",{id:"quote"},"Putting community back in community"),o.a.createElement("div",{className:"container",id:"signup-container"},o.a.createElement("div",{className:"columns is-centered is-vcentered is-mobile"},o.a.createElement("div",{className:"column is-narrow box"},e?o.a.createElement(w,null):o.a.createElement(O,null),o.a.createElement("a",{className:"",id:"login",onClick:this.changeForm},e?"Already have an account?":"Sign up for an account")))))}}]),t}(o.a.Component),k=a(33),D=(a(133),function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"userphoto",style:{backgroundImage:"url(".concat(this.props.creatorPhoto,")")}}),o.a.createElement("div",{className:"username"},this.props.firstName))}}]),t}(n.Component)),F=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={msg:"",creator:a.props.userState.id,dateCreated:"",photos:"",parrentComment:""},a.changeHandler=function(e){var t=e.target,n=t.name,o=t.value;a.setState(Object(y.a)({},n,o))},a.fileChangeHandler=function(e){var t=e.target.files[0];a.setState({photos:t})},a.submitHandler=function(e){e.preventDefault();var t=new Date,n=new FormData;n.set("creator",a.state.creator),n.append("photos",a.state.photos),n.append("msg",a.state.msg),n.append("dateCreated",t),n.append("commentId",a.state.parrentComment),a.props.eventShow?a.saveEvent(n):a.savePost(n)},a.saveEvent=function(e){console.log("save event reply"),v()({method:"post",url:"/api/replyEventComment",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(){a.props.closeForm()})).catch((function(e){return console.log(e)}))},a.savePost=function(e){console.log("save post reply"),v()({method:"post",url:"/api/replyComment",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(){a.props.refreshComments(),a.props.closeForm()})).catch((function(e){return console.log(e)}))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({parrentComment:this.props.postId})}},{key:"render",value:function(){return o.a.createElement("div",{id:"postform"},o.a.createElement("button",{onClick:this.props.closeForm},"X"),o.a.createElement("form",{className:"event",onSubmit:this.submitHandler},o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label",htmlFor:"msg"},"Message"),o.a.createElement("textarea",{placeholder:"message to community",type:"text",rows:"3",className:"textarea",name:"msg",value:this.state.msg,onChange:this.changeHandler})),o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label",htmlFor:"photo"},"Photo"),o.a.createElement("div",{className:"control"},o.a.createElement("input",{className:"input",name:"photo",type:"file",onChange:this.fileChangeHandler}))),o.a.createElement("button",{className:"button is-primary is-small",type:"submit"},"Post!")))}}]),t}(n.Component),P=(a(134),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.comments,t=e._id,a=e.creator,n=e.photos,s=e.msg;return o.a.createElement("div",{className:"post comments box clearfix","data-id":t},o.a.createElement(D,{firstName:a.firstName,creatorPhoto:a.photo}),n?o.a.createElement("img",{alt:"",className:"postPhotos",src:n}):null,o.a.createElement("p",null,s))}}]),t}(n.Component)),x=(a(135),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={loggedIn:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loggedIn:f.isLoggedIn()}),setTimeout((function(){return e.setState({replyCount:e.props.replyCount})}),100)}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.state.loggedIn?o.a.createElement("div",{className:"commentingButtons"},o.a.createElement("button",{className:"button is-smaller",style:{marginRight:".5rem"},onClick:this.props.toggleReply},"Reply"),o.a.createElement("button",{className:"button is-smaller","data-id":this.props.dataId,onClick:this.props.toggleComments},"Comments",o.a.createElement("div",{className:"commentCount"},o.a.createElement("span",null," ",this.props.replyCount," ")))):null)}}]),t}(n.Component)),H=a(36),R=a.n(H),A=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={readComments:!1,comments:[],toggleReply:!1,user:"",replyCount:""},a.componentDidMount=function(){setTimeout((function(){a.setState({user:a.props.userState,comments:a.props.postData.replies,replyCount:a.props.replyCount})}),50)},a.getComments=function(){v.a.get("/api/getComments",{params:{_id:a.props.postData._id}}).then((function(e){console.log("comment.data",e.data),a.setState({comments:e.data,replyCount:e.data.length})}))},a.toggleComments=function(){a.setState({readComments:!a.state.readComments}),a.state.readComments?a.setState.comments=[]:a.getComments()},a.toggleReply=function(){a.setState({toggleReply:!a.state.toggleReply})},a.refreshComments=function(){a.getComments()},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"post box clearfix","data-id":this.props.postData._id},o.a.createElement("div",null,o.a.createElement("div",{className:"clearfix"},o.a.createElement("div",{className:""==!this.props.postData.photos[0]?"clearfix":null},o.a.createElement(D,{firstName:this.props.postData.creator.firstName,creatorPhoto:this.props.postData.creator.photo}),""==!this.props.postData.photos[0]?o.a.createElement("div",{className:"postPhotos"},o.a.createElement("img",{alt:"",src:this.props.postData.photos})):null),o.a.createElement("p",null,this.props.postData.msg)),o.a.createElement(x,{dataId:this.props.postData._id,toggleComments:this.toggleComments,toggleReply:this.toggleReply,replyCount:this.state.replyCount})),this.state.toggleReply?o.a.createElement(F,{userState:this.state.user,postId:this.props.postData._id,closeForm:this.toggleReply,refreshComments:this.refreshComments}):null,this.state.readComments?this.state.comments.map((function(e){return o.a.createElement(P,{key:e.dateCreated,comments:e})})):null)}}]),t}(n.Component),I=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={readComments:!1,comments:[],toggleReply:!1,user:"",replyCount:0},a.getComments=function(){v.a.get("/api/getEventComments",{params:{_id:a.props.eventData._id}}).then((function(e){a.setState({comments:e.data})}))},a.refreshComments=function(){a.getComments()},a.toggleComments=function(){a.setState({readComments:!a.state.readComments}),a.state.readComments?a.setState.comments=[]:a.getComments()},a.toggleReply=function(){a.setState({toggleReply:!a.state.toggleReply})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({user:this.props.userState}),setTimeout((function(){return e.setState({comments:e.props.eventData.replies,replyCount:e.props.replyCount})}),100)}},{key:"render",value:function(){var e=this.props.eventData,t=e.title,a=e.img,n=e.description,s=e.date,r=e.creator,l=e._id;return o.a.createElement("div",{className:"event box clearfix","data-attr":l},o.a.createElement("div",null,o.a.createElement("h2",null,t),o.a.createElement(D,{firstName:r.firstName,creatorPhoto:r.photo}),a?o.a.createElement("div",{className:"postPhotos"},o.a.createElement("img",{src:a,alt:""})):null,o.a.createElement("p",{className:""==!a?"clearRight description":"description"},n),o.a.createElement("span",{className:"dates"},s.start),o.a.createElement(x,{dataId:l,toggleComments:this.toggleComments,toggleReply:this.toggleReply,replyCount:this.state.replyCount})),this.state.toggleReply?o.a.createElement(F,{userState:this.state.user,postId:l,closeForm:this.toggleReply,eventShow:this.props.eventShow,refreshComments:this.refreshComments}):null,this.state.readComments?this.state.comments.map((function(e){return o.a.createElement(P,{key:e.dateCreated,comments:e})})):null)}}]),t}(n.Component),M=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={msg:"",creator:a.props.userState.id,dateCreated:"",photos:""},a.changeHandler=function(e){var t=e.target,n=t.name,o=t.value;a.setState(Object(y.a)({},n,o))},a.fileChangeHandler=function(e){var t=e.target.files[0];a.setState({photos:t})},a.submitHandler=function(e){e.preventDefault();var t=new Date,n=new FormData;n.set("creator",a.state.creator),n.append("photos",a.state.photos),n.append("msg",a.state.msg),n.append("dateCreated",t),a.savePost(n)},a.savePost=function(e){v()({method:"post",url:"/api/post",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(){a.props.closeForm()})).catch((function(e){return console.log(e)}))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log("post form user",this.props.userState)}},{key:"render",value:function(){return o.a.createElement("div",{id:"postform"},o.a.createElement("form",{className:"event",onSubmit:this.submitHandler},o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label",htmlFor:"msg"},"Message"),o.a.createElement("textarea",{placeholder:"message to community",type:"text",rows:"3",className:"textarea",name:"msg",value:this.state.msg,onChange:this.changeHandler})),o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label",htmlFor:"photo"},"Photo"),o.a.createElement("div",{className:"control"},o.a.createElement("input",{className:"input",name:"photo",type:"file",onChange:this.fileChangeHandler}))),o.a.createElement("button",{id:"submitPost",className:"button is-primary is-small",type:"submit"},"Post!")))}}]),t}(n.Component),U=a(53),_=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).displayMarkers=function(){return a.state.events.map((function(e,t){return o.a.createElement(U.Marker,{key:t,id:t,title:e.address,position:{lat:e.lat,lng:e.lon},onClick:function(){return alert("Event: ".concat(e.title," \nDescription: ").concat(e.description))}})}))},a.state={events:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.a.get("/api/all").then((function(t){console.log(t.data),e.setState({events:t.data})}))}},{key:"render",value:function(){return o.a.createElement(U.Map,{google:this.props.google,zoom:11,initialCenter:{lat:33.753746,lng:-84.38633}},this.displayMarkers())}}]),t}(n.Component),L=Object(U.GoogleApiWrapper)({apiKey:Object({NODE_ENV:"production",PUBLIC_URL:""}).MAP_API})(_),T=a(104),q=a.n(T),W=(a(177),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).changeHandler=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a.handleDateChange=function(e){a.setState({start:e})},a.fileChangeHandler=function(e){var t=e.target.files[0];a.setState({img:t})},a.submitHandler=function(e){e.preventDefault(),a.state.title&&a.state.description&&v.a.get("https://api.opencagedata.com/geocode/v1/json?q=".concat(a.state.address,"&key=73b2bdf763ad428694bf092b08ad995d&language=es&pretty=1")).then((function(e){console.log(e),a.setState({lat:e.data.results[0].geometry.lat,lon:e.data.results[0].geometry.lng}),console.log(a.state.lat),console.log(a.state.lon);var t=new FormData;t.append("title",a.state.title),t.append("description",a.state.description),t.append("address",a.state.address),t.append("lat",a.state.lat),t.append("lon",a.state.lon),t.append("date.start",a.state.start),t.append("creator",a.state.creator),t.append("img",a.state.img),console.log("event data",t),v.a.post("/api/event",t).then((function(){a.props.closeForm()})).catch((function(e){return console.log(e)}))})).catch((function(e){console.log(e)})),v.a.get("api/all").then((function(e){console.log(e)}))},a.state={title:"",description:"",address:"",lat:"",lon:"",start:new Date,img:"",creator:a.props.userState.id},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log("post form user",this.props.userState),console.log("creator state",this.state.creator)}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.description,n=e.address;return o.a.createElement("div",{id:"eventForm"},o.a.createElement("form",{onSubmit:this.submitHandler},o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label"},"Name of event"),o.a.createElement("div",{className:"control"},o.a.createElement("input",{className:"input",type:"text",name:"title",placeholder:"Title of the event",value:t,onChange:this.changeHandler}))),o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label"},"Address of event"),o.a.createElement("div",{className:"control"},o.a.createElement("input",{className:"input",type:"text",name:"address",placeholder:"address",value:n,onChange:this.changeHandler}))),o.a.createElement("h1",{className:"label"},"Date"),o.a.createElement(q.a,{selected:this.state.start,onChange:this.handleDateChange}),o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label"},"Description of event"),o.a.createElement("div",{className:"control"},o.a.createElement("textarea",{type:"text",className:"textarea",rows:"3",name:"description",placeholder:"Description of the event",value:a,onChange:this.changeHandler}))),o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label",htmlFor:"img"},"Photo"),o.a.createElement("div",{className:"control"},o.a.createElement("input",{className:"input",name:"img",type:"file",onChange:this.fileChangeHandler}))),o.a.createElement("button",{id:"submitEvent",className:"button is-primary is-small",type:"submit"},"Submit")))}}]),t}(n.Component)),V=(a(235),function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("nav",{className:"navbar is-fixed-top",role:"navigation","aria-label":"main navigation"},o.a.createElement("div",{className:"navbar-brand"},o.a.createElement("a",{className:"navbar-item",href:"#"},o.a.createElement("h1",{id:"title"},"UnKnowd")),o.a.createElement("a",{role:"button",href:"#",className:"navbar-burger","aria-label":"menu","aria-expanded":"false",onClick:this.props.toggleNavbar},o.a.createElement("span",{"aria-hidden":"true"}),o.a.createElement("span",{"aria-hidden":"true"}),o.a.createElement("span",{"aria-hidden":"true"}))),this.props.user?o.a.createElement("div",{className:"navbar-menu"},o.a.createElement("div",{className:"navbar-end"},o.a.createElement("div",{className:"navbar-item",id:"viewChanger"},o.a.createElement("a",{href:"#",className:"button is-primary is-small",id:"viewChange",onClick:this.props.togglePostEventViews},this.props.eventShow?"View Posts":"View Events")),o.a.createElement("div",{className:"navbar-item",id:"postMaker"},o.a.createElement("a",{href:"#",className:"button is-primary is-small",id:"formButton",onClick:this.props.togglePostForm},this.props.postFormShow?"Close":"Make a Post")),o.a.createElement("div",{className:"navbar-item",id:"eventMaker"},o.a.createElement("a",{href:"#",className:"button is-primary is-small",id:"makeEvent",onClick:this.props.toggleEventForm},this.props.eventFormShow?"close":"Make an Event")),o.a.createElement("div",{className:"navbar-item",id:"eventMaker"},o.a.createElement("a",{href:"#",className:"button is-primary is-small",id:"makeEvent",onClick:this.props.logout},"Logout")),o.a.createElement("div",{className:"navbar-item userNameDisplay"},"Welcome back ",this.props.firstName,"!"))):"")}}]),t}(n.Component)),B=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={posts:[],events:[],user:"",eventShow:!1,postFormShow:!1,eventFormShow:!1,burgerActive:!1},a.setUser=function(e){a.setState({user:e})},a.getPosts=function(){v.a.get("/api/posts").then((function(e){a.setState({posts:e.data})})).catch((function(e){return console.log(e)}))},a.getEvents=function(){v.a.get("/api/events").then((function(e){a.setState({events:e.data})})).catch((function(e){return console.log(e)}))},a.togglePostEventViews=function(){a.setState({eventShow:!a.state.eventShow}),a.setState({burgerActive:!1}),document.querySelector(".navbar-menu").classList.remove("is-active")},a.togglePostForm=function(){a.setState({postFormShow:!a.state.postFormShow}),a.setState({burgerActive:!1}),document.querySelector(".navbar-menu").classList.remove("is-active")},a.toggleEventForm=function(){a.setState({eventFormShow:!a.state.eventFormShow}),a.setState({burgerActive:!1}),document.querySelector(".navbar-menu").classList.remove("is-active")},a.toggleNavbar=function(){a.setState({burgerActive:!a.state.burgerActive}),!1===a.state.burgerActive?document.querySelector(".navbar-menu").className+=" is-active":document.querySelector(".navbar-menu").classList.remove("is-active")},a.logout=function(){f.logOut((function(){return window.location="/"}))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.getItem("token")&&E.get("/api/me").then((function(t){e.setUser(t.data)})),this.getPosts(),this.getEvents();var t=R()();t.on("new post",(function(t){e.setState({posts:[t].concat(Object(k.a)(e.state.posts))})})),t.on("new event",(function(t){e.setState({events:[t].concat(Object(k.a)(e.state.events))})}))}},{key:"componentWillUnmount",value:function(){this.socket.close()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"container main"},o.a.createElement(V,{toggleNavbar:this.toggleNavbar,togglePostEventViews:this.togglePostEventViews,eventShow:this.state.eventShow,togglePostForm:this.togglePostForm,toggleEventForm:this.toggleEventForm,logout:this.logout,firstName:this.state.user.firstName,user:this.state.user}),o.a.createElement("div",null,this.state.postFormShow?o.a.createElement(M,{userState:this.state.user,closeForm:this.togglePostForm}):null,this.state.eventFormShow?o.a.createElement(W,{userState:this.state.user,closeForm:this.toggleEventForm}):null),o.a.createElement("div",{className:"columns"},o.a.createElement("div",{className:"column posts"},this.state.eventShow?this.state.events.map((function(t){return o.a.createElement(I,{key:t._id,eventData:t,eventShow:e.state.eventShow,userState:e.state.user,replyCount:t.replies.length})})):this.state.posts.map((function(t){return o.a.createElement(A,{key:t._id,postData:t,userState:e.state.user,replyCount:t.replies.length})}))),o.a.createElement("div",{className:"column events"},o.a.createElement(L,null))))}}]),t}(o.a.Component),K=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={posts:[],events:[]},a.getPosts=function(){v.a.get("/api/posts").then((function(e){console.log(e),a.setState({posts:e.data})})).catch((function(e){return console.log(e)}))},a.getEvents=function(){v.a.get("/api/events").then((function(e){a.setState({events:e.data}),console.log(a.state.events)})).catch((function(e){return console.log(e)}))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getPosts(),this.getEvents();var t=R()();t.on("new post",(function(t){console.log(t),e.setState({posts:[t].concat(Object(k.a)(e.state.posts))})})),t.on("new event",(function(t){console.log(t),e.setState({events:[t].concat(Object(k.a)(e.state.events))})}))}},{key:"componentWillUnmount",value:function(){this.socket.close()}},{key:"render",value:function(){return o.a.createElement("div",{className:"container main"},o.a.createElement(V,null),o.a.createElement("div",{className:"columns"},o.a.createElement("div",{className:"column posts"},this.state.events.map((function(e){return o.a.createElement(I,{key:e._id,eventData:e})}))),o.a.createElement("div",{className:"column events"},o.a.createElement(L,null))))}}]),t}(o.a.Component),z=(a(236),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={user:null},a.setUser=function(e){a.setState({user:e})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.getItem("token")&&E.get("/api/me").then((function(t){return e.setUser(t.data)}))}},{key:"render",value:function(){var e=this.state.user,t=this.setUser;return o.a.createElement(p.a,null,o.a.createElement("div",null,o.a.createElement(C.Provider,{value:{user:e,setUser:t}},o.a.createElement(h.b,{exact:!0,path:"/",component:j}),o.a.createElement(b,{exact:!0,path:"/mainpage",component:B}),o.a.createElement(h.b,{exact:!0,path:"/viewer",component:K}))))}}]),t}(n.Component)),J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function X(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(o.a.createElement(z,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");J?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):X(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):X(e)}))}}()}},[[108,1,2]]]);
//# sourceMappingURL=main.5943ca1d.chunk.js.map