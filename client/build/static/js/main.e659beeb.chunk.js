(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{109:function(e,t,a){e.exports=a(240)},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},176:function(e,t){},237:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(27),r=a.n(o),l=a(4),i=a(5),c=a(7),m=a(6),u=a(8),p=a(24),h=a(25),d=a(108),g=a(11),v=a.n(g);var f=function(){function e(e,t,a){v.a.post("/api/authenticate",{email:e,password:t}).then((function(e){localStorage.setItem("token",e.data.token),a(e)})).catch((function(e){console.log(e.response),401===e.response.status&&a(e.response)}))}return{isLoggedIn:function(){return!!localStorage.getItem("token")},logIn:e,logOut:function(e){localStorage.removeItem("token"),e()},getToken:function(){return localStorage.getItem("token")},register:function(t,a){console.log("start register");var n=t.get("email"),s=t.get("password");v.a.post("/api/signup",t).then((function(t){e(n,s,a),console.log(t)})).catch((function(e){console.log(e.response)}))}}}(),b=function(e){var t=e.component,a=Object(d.a)(e,["component"]);return s.a.createElement(h.b,Object.assign({},a,{render:function(e){return f.isLoggedIn()?s.a.createElement(t,e):s.a.createElement(h.a,{to:"/"})}}))},E=v.a.create({headers:{Authorization:localStorage.getItem("token")}}),N=a(13),w=Object(n.createContext)();function y(e){document.querySelector("#imageSelect").value="",this.setState(Object(N.a)({},e,""))}function C(e,t){var a=e.target.files[0];this.setState(Object(N.a)({},t,a))}a(134);var S=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"file has-name is-fullwidth is-primary"},s.a.createElement("label",{className:"file-label"},s.a.createElement("input",{id:"imageSelect",className:"file-input",type:"file",name:this.props.fileName,onChange:this.props.fileChangeHandler}),s.a.createElement("span",{className:"file-cta"},s.a.createElement("span",{className:"file-label"},"+ Photo")),s.a.createElement("span",{className:"file-name"},this.props.photoFileName)),s.a.createElement("span",{id:"imageRemove",onClick:this.props.removeImage},"x"))}}]),t}(n.Component),O=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={email:"",password:"",firstName:"",lastName:"",photo:""},a.removeImage=function(){return a.clearImageSelect("photo")},a.changeHandler=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(N.a)({},n,s))},a.emailChangeHandler=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(N.a)({},n,s.toLowerCase()))},a.fileChangeHandler=function(e){var t=e.target.files[0];a.setState({photo:t})},a.submitHandler=function(e){e.preventDefault(),a.setState({email:a.state.email.toLowerCase()});var t=a.state,n=t.email,s=t.password,o=t.firstName,r=t.lastName,l=new FormData(document.querySelector("#newUserForm"));l.set("email",a.state.email.toLowerCase()),n&&s&&o&&r&&f.register(l,(function(e){a.context.setUser(e.data),a.props.history.push("/"),window.location="/mainpage"}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.clearImageSelect=y.bind(this)}},{key:"render",value:function(){return s.a.createElement("form",{id:"newUserForm",onSubmit:this.submitHandler},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label",htmlFor:"firstName"},"First Name"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"firstName",value:this.state.first,onChange:this.changeHandler,required:!0}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label",htmlFor:"lastName"},"Last Name"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"lastName",value:this.state.last,onChange:this.changeHandler}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label",htmlFor:"email"},"Email"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"email",value:this.state.email,onChange:this.changeHandler,required:!0,pattern:".+@.+\\..+"}))),s.a.createElement(S,{fileName:"photo",fileChangeHandler:this.fileChangeHandler,photoFileName:this.state.photo.name,removeImage:this.removeImage}),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label",htmlFor:"password"},"Password (min of 8 characters)"),s.a.createElement("div",{className:"contol"},s.a.createElement("input",{className:"input",type:"password",name:"password",value:this.state.password,onChange:this.changeHandler,required:!0,pattern:".{8,}"}))),s.a.createElement("button",{id:"signupButton",className:"button is-primary is-small",type:"submit"},"Sign up"))}}]),t}(n.Component);O.contextType=w;var j=Object(h.g)(O),k=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={email:"",password:"",user:"",badlogin:""},a.resizeVh=function(e){console.log("rezize"),e=window.innerHeight,document.documentElement.style.setProperty("--bodyHeight","".concat(e,"px"))},a.setUser=function(e){a.setState({user:e})},a.changeHandler=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(N.a)({},n,s))},a.badlogin=function(e){a.setState({badlogin:e})},a.submitHandler=function(e){e.preventDefault(),a.setState({badlogin:""});var t=a.state,n=t.email,s=t.password;n&&s&&f.logIn(n,s,(function(e){200===e.status&&(a.context.setUser(e.data),a.props.history.push("/"),window.location="/mainpage"),401===e.status&&a.badlogin(e.data.msg)}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=window.innerHeight;this.resizeVh(e),window.addEventListener("resize",this.resizeVh.bind(this))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{onSubmit:this.submitHandler},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label",htmlFor:"email"},"Email"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"email",value:this.state.email,onChange:this.changeHandler}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label",htmlFor:"password"},"Password"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"password",name:"password",value:this.state.password,onChange:this.changeHandler}))),s.a.createElement("button",{id:"loginButton",className:"button is-primary is-small",type:"submit"},"Login")),""==!this.state.badlogin?s.a.createElement("p",{className:"badlogin"},this.state.badlogin):null)}}]),t}(n.Component);k.contextType=w;var F=Object(h.g)(k),H=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={isRegister:!1,loggedIn:!1},a.setUser=function(e){a.setState({user:e})},a.changeForm=function(){a.setState({isRegister:!a.state.isRegister})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.getItem("token")&&E.get("/api/me").then((function(t){e.setUser(t.data),t.data.id&&e.setState({loggedIn:!0})}))}},{key:"render",value:function(){var e=this.state.isRegister;return s.a.createElement("div",{id:"wrap"},this.state.loggedIn?s.a.createElement(h.a,{to:"/mainpage"}):null,s.a.createElement("nav",null,s.a.createElement("h1",{id:"main-name"},"UnKnowd")),s.a.createElement("div",{className:"loginBody"},s.a.createElement("h5",{id:"quote"},"Putting community back in community"),s.a.createElement("div",{className:"container",id:"signup-container"},s.a.createElement("div",{className:"columns is-centered is-vcentered is-mobile"},s.a.createElement("div",{className:"column is-narrow box"},e?s.a.createElement(j,null):s.a.createElement(F,null),s.a.createElement("a",{href:"#",className:"",id:"login",onClick:this.changeForm},e?"Already have an account?":"Sign up for an account"))))))}}]),t}(s.a.Component),P=a(34),I=(a(135),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"userphoto",style:{backgroundImage:"url(".concat(this.props.creatorPhoto,")")}}),s.a.createElement("div",{className:"username"},this.props.firstName))}}]),t}(n.Component)),x=(a(56),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={msg:"",creator:a.props.userState.id,dateCreated:"",photos:"",parrentComment:""},a.fileChangeHandler=function(e){return a.fileChange(e,"photo")},a.removeImage=function(){return a.clearImageSelect("photos")},a.changeHandler=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(N.a)({},n,s))},a.fileChangeHandler=function(e){var t=e.target.files[0];a.setState({photos:t})},a.submitHandler=function(e){e.preventDefault();var t=new Date,n=new FormData;n.set("creator",a.state.creator),n.append("photos",a.state.photos),n.append("msg",a.state.msg),n.append("dateCreated",t),n.append("commentId",a.state.parrentComment),a.props.eventShow?a.saveEvent(n):a.savePost(n)},a.saveEvent=function(e){console.log("save event reply"),v()({method:"post",url:"/api/replyEventComment",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(){a.props.closeForm()})).catch((function(e){return console.log(e)}))},a.savePost=function(e){console.log("save post reply"),v()({method:"post",url:"/api/replyComment",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(){a.props.closeForm()})).catch((function(e){return console.log(e)}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({parrentComment:this.props.postId}),this.clearImageSelect=y.bind(this),this.fileChange=C.bind(this)}},{key:"render",value:function(){return s.a.createElement("div",{id:"postform"},s.a.createElement("button",{className:"button is-smaller",onClick:this.props.closeForm},"X"),s.a.createElement("form",{className:"event",onSubmit:this.submitHandler},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label",htmlFor:"msg"},"Message"),s.a.createElement("textarea",{placeholder:"message to community",type:"text",rows:"3",className:"textarea",name:"msg",value:this.state.msg,onChange:this.changeHandler})),s.a.createElement(S,{fileChangeHandler:this.fileChangeHandler,removeImage:this.removeImage,fileName:"photos",photoFileName:this.state.photos.name}),s.a.createElement("button",{id:"replyButton",className:"button is-primary is-small",type:"submit"},"Post!")))}}]),t}(n.Component)),D=(a(136),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).componentDidMount=function(){},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.comments,t=e._id,a=e.creator,n=e.photos,o=e.msg;return s.a.createElement("div",{className:"post comments box clearfix","data-id":t},s.a.createElement(I,{firstName:a.firstName,creatorPhoto:a.photo}),n?s.a.createElement("img",{alt:"",className:"postPhotos",src:n}):null,s.a.createElement("p",{className:""==!n?"clearRight description":"description"},o))}}]),t}(n.Component)),A=(a(137),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={loggedIn:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({loggedIn:f.isLoggedIn()})}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,this.state.loggedIn?s.a.createElement("div",{className:"commentingButtons"},s.a.createElement("button",{className:"button is-smaller",style:{marginRight:".5rem"},onClick:this.props.toggleReply},"Reply"),s.a.createElement("button",{className:"button is-smaller","data-id":this.props.dataId,onClick:this.props.toggleComments},"Comments",s.a.createElement("div",{className:"commentCount"},s.a.createElement("span",null," ",this.props.replyCount," ")))):null)}}]),t}(n.Component)),M=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={readComments:!1,toggleReply:!1,user:"",replyCount:""},a.toggleComments=function(){a.setState({readComments:!a.state.readComments})},a.toggleReply=function(){a.setState({toggleReply:!a.state.toggleReply})},a.refreshComments=function(){a.getComments()},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"post box clearfix","data-id":this.props.postData._id},s.a.createElement("div",null,s.a.createElement("div",{className:"clearfix"},s.a.createElement("div",{className:""==!this.props.postData.photos[0]?"clearfix":null},s.a.createElement(I,{firstName:this.props.postData.creator.firstName,creatorPhoto:this.props.postData.creator.photo}),""==!this.props.postData.photos[0]?s.a.createElement("div",{className:"postPhotos"},s.a.createElement("img",{alt:"",src:this.props.postData.photos})):null),s.a.createElement("p",null,this.props.postData.msg)),s.a.createElement(A,{dataId:this.props.postData._id,toggleComments:this.toggleComments,toggleReply:this.toggleReply,replyCount:this.props.replyCount})),this.state.toggleReply?s.a.createElement(x,{userState:this.props.userState,postId:this.props.postData._id,closeForm:this.toggleReply,refreshComments:this.refreshComments}):null,this.state.readComments?this.props.postData.replies.map((function(e){return s.a.createElement(D,{key:e.dateCreated,comments:e})})):null)}}]),t}(n.Component),R=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={readComments:!1,toggleReply:!1,user:"",replyCount:""},a.toggleComments=function(){a.setState({readComments:!a.state.readComments})},a.toggleReply=function(){a.setState({toggleReply:!a.state.toggleReply})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.eventData,t=e.title,a=e.address,n=e.img,o=e.description,r=e.date,l=e.creator,i=e._id,c=e.replies;return s.a.createElement("div",{className:"event box clearfix","data-attr":i},s.a.createElement("div",null,s.a.createElement("h2",null,t),s.a.createElement("p",null,a),s.a.createElement(I,{firstName:l.firstName,creatorPhoto:l.photo}),n?s.a.createElement("div",{className:"postPhotos"},s.a.createElement("img",{src:n,alt:""})):null,s.a.createElement("p",{className:""==!n?"clearRight description":"description"},o),s.a.createElement("span",{className:"dates"},r.start),s.a.createElement(A,{dataId:i,toggleComments:this.toggleComments,toggleReply:this.toggleReply,replyCount:this.props.replyCount})),this.state.toggleReply?s.a.createElement(x,{userState:this.props.userState,postId:i,closeForm:this.toggleReply,eventShow:this.props.eventShow}):null,this.state.readComments?c.map((function(e){return s.a.createElement(D,{key:e.dateCreated,comments:e})})):null)}}]),t}(n.Component),z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={msg:"",creator:a.props.userState.id,dateCreated:"",photos:""},a.fileChangeHandler=function(e){return a.fileChange(e,"photo")},a.removeImage=function(){a.clearImageSelect("photos")},a.changeHandler=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(N.a)({},n,s))},a.fileChangeHandler=function(e){var t=e.target.files[0];a.setState({photos:t})},a.submitHandler=function(e){e.preventDefault();var t=new Date,n=new FormData;n.set("creator",a.state.creator),n.append("photos",a.state.photos),n.append("msg",a.state.msg),n.append("dateCreated",t),a.savePost(n)},a.savePost=function(e){v()({method:"post",url:"/api/post",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(){a.props.closeForm()})).catch((function(e){return console.log(e)}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.clearImageSelect=y.bind(this),this.fileChange=C.bind(this)}},{key:"render",value:function(){return s.a.createElement("div",{id:"postform"},s.a.createElement("button",{className:"button is-smaller",onClick:this.props.closeForm},"X"),s.a.createElement("form",{className:"event",onSubmit:this.submitHandler},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label",htmlFor:"msg"},"Message"),s.a.createElement("textarea",{placeholder:"message to community",type:"text",rows:"3",className:"textarea",name:"msg",value:this.state.msg,onChange:this.changeHandler})),s.a.createElement(S,{fileChangeHandler:this.fileChangeHandler,removeImage:this.removeImage,fileName:"photos",photoFileName:this.state.photos.name}),s.a.createElement("button",{id:"submitPost",className:"button newPost is-small",type:"submit"},"Post!")))}}]),t}(n.Component),L=a(53),U=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).displayMarkers=function(){return a.props.events.map((function(e,t){return s.a.createElement(L.Marker,{key:t,id:t,title:e.address,position:{lat:e.lat,lng:e.lon},onClick:function(){return alert("Event: ".concat(e.title," \nAddress:").concat(e.address,"\nDescription: ").concat(e.description))}})}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement(L.Map,{google:this.props.google,zoom:11,initialCenter:{lat:33.753746,lng:-84.38633}},this.displayMarkers())}}]),t}(n.Component),V=Object(L.GoogleApiWrapper)({apiKey:Object({NODE_ENV:"production",PUBLIC_URL:""}).MAP_API})(U),q=a(43),T=a.n(q),_=a(105),W=a.n(_),B=(a(179),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).fileChangeHandler=function(e){return a.fileChange(e,"photo")},a.removeImage=function(){a.clearImageSelect("img")},a.changeHandler=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a.handleDateChange=function(e){a.setState({start:e})},a.fileChangeHandler=function(e){var t=e.target.files[0];a.setState({img:t})},a.submitHandler=function(e){e.preventDefault(),a.state.title&&a.state.description&&v.a.get("https://api.opencagedata.com/geocode/v1/json?q=".concat(a.state.address,"&key=73b2bdf763ad428694bf092b08ad995d&language=es&pretty=1")).then((function(e){a.setState({lat:e.data.results[0].geometry.lat,lon:e.data.results[0].geometry.lng});var t=new FormData;t.append("title",a.state.title),t.append("description",a.state.description),t.append("address",a.state.address),t.append("lat",a.state.lat),t.append("lon",a.state.lon),t.append("date.start",a.state.start),t.append("creator",a.state.creator),t.append("img",a.state.img),v.a.post("/api/event",t).then((function(){a.props.eventShow||a.props.togglePostEventViews(),a.props.closeForm()})).catch((function(e){return console.log(e.response)}))})).catch((function(e){console.log(e)}))},a.state={title:"",description:"",address:"",lat:"",lon:"",start:new Date,img:"",creator:a.props.userState.id},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.clearImageSelect=y.bind(this),this.fileChange=C.bind(this)}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.description,n=e.address;return s.a.createElement("div",{id:"eventForm"},s.a.createElement("button",{className:"button is-smaller",onClick:this.props.closeForm},"X"),s.a.createElement("form",{onSubmit:this.submitHandler},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Name of event"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"title",placeholder:"Title of the event",value:t,onChange:this.changeHandler}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Address of event"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"address",placeholder:"address",value:n,onChange:this.changeHandler}))),s.a.createElement("h1",{className:"label"},"Date"),s.a.createElement(W.a,{selected:this.state.start,onChange:this.handleDateChange,className:"input"}),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Description of event"),s.a.createElement("div",{className:"control"},s.a.createElement("textarea",{type:"text",className:"textarea",rows:"3",name:"description",placeholder:"Description of the event",value:a,onChange:this.changeHandler}))),s.a.createElement(S,{fileChangeHandler:this.fileChangeHandler,removeImage:this.removeImage,fileName:"img",photoFileName:this.state.img.name}),s.a.createElement("button",{id:"submitEvent",className:"button newPost is-small",type:"submit"},"Submit")))}}]),t}(n.Component)),K=(a(237),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={burgerActive:!1},a.toggleNavbar=function(){a.setState({burgerActive:!a.state.burgerActive}),!1===a.state.burgerActive?document.querySelector(".navbar-menu").className+=" is-active":document.querySelector(".navbar-menu").classList.remove("is-active")},a.toggleConditional=function(){"/mainpage"===window.location.pathname&&a.props.toggleNavbar(),"/profile"===window.location.pathname&&a.toggleNavbar()},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("nav",{className:"navbar is-fixed-top",role:"navigation","aria-label":"main navigation"},s.a.createElement("div",{className:"navbar-brand"},s.a.createElement("a",{className:"navbar-item",href:"/mainpage"},s.a.createElement("h1",{id:"title"},"UnKnowd")),s.a.createElement("a",{role:"button",href:"#",className:"navbar-burger","aria-label":"menu","aria-expanded":"false",onClick:this.toggleConditional},s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}))),this.context.user?s.a.createElement("div",{className:"navbar-menu"},s.a.createElement("div",{className:"navbar-end"},"/mainpage"===window.location.pathname?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"navbar-item",id:"viewChanger"},s.a.createElement("a",{href:"#",className:"button is-small",id:"viewChange",onClick:this.props.togglePostEventViews},this.props.eventShow?"Posts":"Events")),s.a.createElement("div",{className:"navbar-item",id:"postMaker"},s.a.createElement("a",{href:"#",className:"button is-small",id:"formButton",onClick:this.props.togglePostForm},this.props.postFormShow?"Close":s.a.createElement(s.a.Fragment,null,"+",s.a.createElement("br",null),"Post"))),s.a.createElement("div",{className:"navbar-item",id:"eventMaker"},s.a.createElement("a",{href:"#",className:"button is-small",id:"makeEvent",onClick:this.props.toggleEventForm},this.props.eventFormShow?"close":s.a.createElement(s.a.Fragment,null,"+",s.a.createElement("br",null),"Event"))),window.innerWidth<=768?s.a.createElement("div",{className:"navbar-item",id:"mapHide"},s.a.createElement("a",{href:"#",className:"button is-small",onClick:this.props.toggleMapMobile},"Hide",s.a.createElement("br",null),"Map")):null):null,s.a.createElement("div",{className:"navbar-item",id:"eventMaker"},s.a.createElement("a",{href:"#",className:"button is-small",id:"makeEvent",onClick:this.props.logout},"Logout")),s.a.createElement("div",{className:"navbar-item userNameDisplay"},"Welcome back",s.a.createElement(p.b,{to:"/profile"},this.context.user.photo?s.a.createElement(I,{creatorPhoto:this.context.user.photo}):s.a.createElement("span",{className:"navUserName"},this.context.user.firstName))))):null))}}]),t}(n.Component));K.contextType=w;var X=K,J=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={posts:[],events:[],user:"",eventShow:!1,postFormShow:!1,eventFormShow:!1,burgerActive:!1,mapShow:!0,comment:!1},a.setUser=function(e){a.setState({user:e})},a.resizeVh=function(e){console.log("rezize"),e=window.innerHeight,document.documentElement.style.setProperty("--bodyHeight","".concat(e,"px"))},a.getPosts=function(){v.a.get("/api/posts").then((function(e){a.setState({posts:e.data})})).catch((function(e){return console.log(e.resoponse)}))},a.getEvents=function(){v.a.get("/api/events").then((function(e){a.setState({events:e.data})})).catch((function(e){return console.log(e.resoponse)}))},a.togglePostEventViews=function(){a.setState({eventShow:!a.state.eventShow,burgerActive:!1}),document.querySelector(".navbar-menu").classList.remove("is-active")},a.togglePostForm=function(){a.setState({postFormShow:!a.state.postFormShow,eventFormShow:!1,burgerActive:!1}),document.querySelector(".navbar-menu").classList.remove("is-active")},a.toggleEventForm=function(){a.setState({eventFormShow:!a.state.eventFormShow,postFormShow:!1,burgerActive:!1}),document.querySelector(".navbar-menu").classList.remove("is-active")},a.toggleNavbar=function(){!1===a.state.burgerActive?document.querySelector(".navbar-menu").className+=" is-active":document.querySelector(".navbar-menu").classList.remove("is-active"),a.setState({burgerActive:!a.state.burgerActive})},a.toggleMapMobile=function(){var e=window.innerHeight+"px";window.innerWidth<769&&!0===a.state.mapShow?document.querySelector(".column.posts").setAttribute("style","height:calc(".concat(e," - 4rem)")):document.querySelector(".column.posts").setAttribute("style","height:calc(".concat(e," * .6 - 5rem)")),a.setState({mapShow:!a.state.mapShow}),a.toggleNavbar()},a.logout=function(){f.logOut((function(){return window.location="/"}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.getItem("token")&&E.get("/api/me").then((function(t){e.setUser(t.data)}));var t=window.innerHeight;this.resizeVh(t),window.addEventListener("resize",this.resizeVh.bind(this)),this.getPosts(),this.getEvents();var a=T()();a.on("new post",(function(t){e.setState({posts:[t].concat(Object(P.a)(e.state.posts))})})),a.on("new event",(function(t){e.setState({events:[t].concat(Object(P.a)(e.state.events))})})),a.on("new comment",(function(t){t.post&&e.getPosts(),t.event&&e.getEvents(),console.log("done")}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container main"},s.a.createElement(X,{togglePostEventViews:this.togglePostEventViews,eventShow:this.state.eventShow,togglePostForm:this.togglePostForm,toggleEventForm:this.toggleEventForm,logout:this.logout,postFormShow:this.state.postFormShow,eventFormShow:this.state.eventFormShow,toggleNavbar:this.toggleNavbar,toggleMapMobile:this.toggleMapMobile}),s.a.createElement("div",null,this.state.postFormShow?s.a.createElement(z,{userState:this.state.user,closeForm:this.togglePostForm}):null,this.state.eventFormShow?s.a.createElement(B,{userState:this.state.user,closeForm:this.toggleEventForm,eventShow:this.state.eventShow,togglePostEventViews:this.togglePostEventViews}):null),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column posts"},this.state.eventShow?this.state.events.map((function(t){return s.a.createElement(R,{key:t._id,eventData:t,eventShow:e.state.eventShow,userState:e.context.user,replyCount:t.replies.length})})):this.state.posts.map((function(t){return s.a.createElement(M,{key:t._id,postData:t,userState:e.state.user,replyCount:t.replies.length})}))),window.innerWidth<=768&&!this.state.mapShow?null:s.a.createElement("div",{className:"column events"},s.a.createElement(V,{events:this.state.events}))))}}]),t}(s.a.Component);J.contextType=w;var G=J,$=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={posts:[],events:[]},a.resizeVh=function(e){console.log("rezize"),e=window.innerHeight,document.documentElement.style.setProperty("--bodyHeight","".concat(e,"px"))},a.getPosts=function(){v.a.get("/api/posts").then((function(e){console.log(e),a.setState({posts:e.data})})).catch((function(e){return console.log(e)}))},a.getEvents=function(){v.a.get("/api/events").then((function(e){a.setState({events:e.data}),console.log(a.state.events)})).catch((function(e){return console.log(e)}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=window.innerHeight;this.resizeVh(t),window.addEventListener("resize",this.resizeVh.bind(this)),this.getPosts(),this.getEvents();var a=T()();a.on("new post",(function(t){console.log(t),e.setState({posts:[t].concat(Object(P.a)(e.state.posts))})})),a.on("new event",(function(t){console.log(t),e.setState({events:[t].concat(Object(P.a)(e.state.events))})}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"container main"},s.a.createElement(X,null),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column posts"},this.state.events.map((function(e){return s.a.createElement(R,{key:e._id,eventData:e})}))),s.a.createElement("div",{className:"column events"},s.a.createElement(V,{events:this.state.events}))))}}]),t}(s.a.Component),Q=(a(238),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).setUser=function(e){a.setState({user:e})},a.resizeVh=function(e){console.log("rezize"),e=window.innerHeight,document.documentElement.style.setProperty("--bodyHeight","".concat(e,"px"))},a.fileChangeHandler=function(e){return a.fileChange(e,"photo")},a.removeImage=function(){a.clearImageSelect("photo")},a.changeHandler=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(N.a)({},n,s))},a.logout=function(){f.logOut((function(){return window.location="/"}))},a.submitHandler=function(e){e.preventDefault(),f.logIn(a.state.info.email,a.state.currentPassword,(function(e){if(console.log(e.status),200===e.status){console.log("initial auth ok");var t=new FormData;a.state.email&&t.append("email",a.state.email),a.state.firstName&&t.append("firstName",a.state.firstName),a.state.lastName&&t.append("lastName",a.state.lastName),a.state.photo&&t.append("photo",a.state.photo),t.append("id",a.state.user.id),a.state.newPassword===a.state.passwordCheck&&""!=a.state.newPassword&&t.append("password",a.state.newPassword),E.post("/api/userInfoUpdate",t).then((function(e){console.log(e.data),a.setState({info:e.data}),a.setState({email:"",firstName:"",lastName:"",photo:"",currentPassword:"",newPassword:"",passwordCheck:""})})).catch((function(e){console.log(e.response)}))}else 401===e.status&&console.log("bad password");document.querySelector("#profile.container .column").scrollTop=0}))},a.state={email:"",firstName:"",lastName:"",photo:"",info:"",user:"",currentPassword:"",newPassword:"",passwordCheck:""},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=window.innerHeight;this.resizeVh(t),window.addEventListener("resize",this.resizeVh.bind(this)),localStorage.getItem("token")&&E.get("/api/me").then((function(t){e.setState({user:t.data})})),E.get("/api/userInfo",this.state.user.id).then((function(t){e.setState({info:t.data})})).catch((function(e){console.log(e.response)})),this.clearImageSelect=y.bind(this),this.fileChange=C.bind(this)}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(X,{logout:this.logout}),s.a.createElement("div",{id:"profile",className:"container"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"box"},s.a.createElement("h2",null,"Current Info:"),s.a.createElement(I,{creatorPhoto:this.state.info.photo}),s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,"First Name:"),s.a.createElement("td",null,this.state.info.firstName)),s.a.createElement("tr",null,s.a.createElement("td",null,"Last Name:"),s.a.createElement("td",null,this.state.info.lastName)),s.a.createElement("tr",null,s.a.createElement("td",null,"Email:"),s.a.createElement("td",null,this.state.info.email))))),s.a.createElement("form",{id:"updateUserForm",className:"box",onSubmit:this.submitHandler},s.a.createElement("h2",null,"Update your info:"),s.a.createElement("br",null),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label",htmlFor:"firstName"},"First Name"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"firstName",value:this.state.firstName,onChange:this.changeHandler}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label",htmlFor:"lastName"},"Last Name"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"lastName",value:this.state.lastName,onChange:this.changeHandler}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label",htmlFor:"email"},"Email"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"email",value:this.state.email,onChange:this.changeHandler}))),s.a.createElement(S,{fileChangeHandler:this.fileChangeHandler,removeImage:this.removeImage,fileName:"photo",photoFileName:this.state.photo.name}),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label",htmlFor:"newPassword"},"New Password"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"password",name:"newPassword",value:this.state.newPassword,onChange:this.changeHandler,pattern:".{8,}",placeholder:"min 8 chars"}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label",htmlFor:"passwordCheck"},"New Password Again"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"password",name:"passwordCheck",value:this.state.passwordCheck,onChange:this.changeHandler,pattern:".{8,}",placeholder:"min 8 chars"}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label",htmlFor:"currentPassword"},"Current Password"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"password",name:"currentPassword",value:this.state.currentPassword,onChange:this.changeHandler,required:!0,pattern:".{8,}",placeholder:"min 8 chars"}))),s.a.createElement("button",{id:"updateInfo",className:"button is-primary is-small",type:"submit"},"Update"))))))}}]),t}(n.Component)),Y=(a(239),function(){return s.a.createElement("div",{className:"container is-center",style:{height:"100vh",maxWidth:"600px",paddingTop:"0",marginTop:"0"}},s.a.createElement("div",{className:"columns is-vcentered",style:{height:"100%"}},s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"box"},s.a.createElement("h1",null,"404 NOT FOUND"),s.a.createElement("h3",null,"Looks like you got lost along the way")))))}),Z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={user:null},a.setUser=function(e){a.setState({user:e})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.getItem("token")&&E.get("/api/me").then((function(t){return e.setUser(t.data)}))}},{key:"render",value:function(){var e=this.state.user,t=this.setUser;return s.a.createElement(p.a,null,s.a.createElement("div",null,s.a.createElement(w.Provider,{value:{user:e,setUser:t}},s.a.createElement(h.d,null,s.a.createElement(b,{exact:!0,path:"/mainpage",component:G}),s.a.createElement(h.b,{exact:!0,path:"/viewer",component:$}),s.a.createElement(b,{exact:!0,path:"/profile",component:Q}),s.a.createElement(h.b,{exact:!0,path:"/",user:this.state.user,component:H}),s.a.createElement(h.b,{component:Y})))))}}]),t}(n.Component),ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function te(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(s.a.createElement(Z,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");ee?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):te(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):te(e)}))}}()},56:function(e,t,a){}},[[109,1,2]]]);
//# sourceMappingURL=main.e659beeb.chunk.js.map